
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é¦¬ä¾†è¥¿äºå›æ†¶å°éŠæˆ²</title>
  <style>
    body {
      font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
      text-align: center;
      padding: 30px;
      background-repeat: no-repeat;
      background-size: contain;
      background-position: center;
      transition: background-image 1s ease-in-out;
      position: relative;
      z-index: 0;
    }
    .game-container {
      background-color: rgba(255, 255, 255, 0.85);
      border-radius: 16px;
      padding: 20px;
      display: inline-block;
      max-width: 900px;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.75);
      z-index: -1;
      pointer-events: none;
    }
    
    
    #alphabet {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 800px;
      margin: 0 auto;
    }
    .multi-choice {
      min-width: 80px;
      height: 60px;
      margin: 5px;
      font-size: 0.9em;
      background-color: #fff;
      border: 2px solid #ffd666;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 8px;
    }
    .multi-choice:hover {
      background-color: #ffe58f;
      border-color: #ffa940;
    }
    .multi-choice.selected {
      background-color: #ff7875;
      border-color: #ff4d4f;
      color: white;
    }
    button {
      background-color: #91d5ff;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      margin: 20px 10px;
      font-size: 1em;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #69c0ff;
    }
    #musicControl {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 100;
    }
    .envelope {
      background: #fffbe6;
      border: 2px solid #ffd666;
      border-radius: 12px;
      padding: 30px;
      text-align: left;
      animation: fadeIn 1s ease forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 999;
      display: none;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.6s ease-in-out;
    }
    #letterModal {
      background-color: #fffef0;
      border-radius: 16px;
      padding: 30px;
      max-width: 700px;
      width: 90%;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      animation: slideUp 0.6s ease-out;
    }
    @keyframes slideUp {
      from { transform: translateY(80px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .bg-container {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: -1;
      overflow: hidden;
    }
    .bg-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center center;
      transition: opacity 1s ease-in-out;
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="bg-container">
    <img id="bgImage" src="images/bg1.jpg" alt="èƒŒæ™¯åœ–">
  </div>
  <audio id="bgm" src="music1.mp3" loop></audio>
  <button id="musicControl" onclick="toggleMusic()">ğŸ”ˆ éŸ³æ¨‚</button>
  <div class="game-container">
  <h1>ğŸ“ é¦¬ä¾†è¥¿äºå›æ†¶å°éŠæˆ² âœ§</h1>
  
<div id="progressContainer" style="width: 100%; max-width: 900px; margin: 20px auto;">
  <div id="progressBar" style="height: 20px; background: #ffe58f; border-radius: 10px; overflow: hidden;">
    <div id="progressFill" style="height: 100%; width: 0%; background: #fa541c; transition: width 0.5s;"></div>
  </div>
</div>

<div id="story"></div>
  <div id="alphabet"></div>
  <div>
    <button onclick="submitMulti()">æäº¤ç­”æ¡ˆ</button>
    <button onclick="resetMulti()">é‡æ–°é¸æ“‡</button>
  </div>
  </div>
  <div id="letterContainer" style="display: none;"></div>
  <div id="overlay">
    <div id="letterModal">
      <div class="envelope">
        <h3 style="color:#d46b08;">ğŸ’Œ çµ¦å­¸é•·å§çš„ä¸€å°ä¿¡</h3>
        <p>è¦ªæ„›çš„å­¸é•·å§å€‘ï¼š</p>
        <p>çœŸçš„å¾ˆæ„Ÿè¬ä½ å€‘ï¼Œä¸ç®¡æ˜¯åœ¨é¦¬ä¾†è¥¿äºã€åœ¨æ±æ¸¯ï¼Œé‚„æ˜¯æˆ‘ç”Ÿæ—¥çš„æ™‚å€™ï¼Œä½ å€‘éƒ½å¾ˆç…§é¡§æˆ‘ï¼Œè®“æˆ‘æ„Ÿå—åˆ°äººå¿ƒçš„æº«æš–ã€ä¹Ÿç•™ä¸‹çè²´çš„å›æ†¶ã€‚</p>
        <pre style="font-family: inherit; white-space: pre-wrap;">
ç¥ä½ å€‘åœ¨æœªä¾†çš„è·¯ä¸Šéƒ½èƒ½<strong>é¦¬</strong>åˆ°æˆåŠŸï¼Œ
                ä¸ç•å›°é›£å¥½æ©Ÿæœƒ<strong>ä¾†</strong>è€…ä¸æ‹’ï¼Œ
                å¿™ç¢Œä¹‹é¤˜å¸¸æœ‰é–’<strong>è¥¿</strong>çª—å‰ªç‡­ï¼Œ
æœ€å¾Œç¥ä¸ç®¡æ˜¥åˆ†å¤è‡³ç§‹åˆ†<strong>äº</strong>æ­²å››å­£éƒ½å¥½ï¼
        </pre>
        <p style="text-align: right; margin-top: 30px;">å­¸å¼Ÿ æ¥Šç«£å‚‘ æ•¬ä¸Š</p>
        <div style="text-align: center;"><button onclick="closeLetter()">é—œé–‰ä¿¡ä»¶</button></div>
      </div>
    </div>
  </div>
  <script>

    const questions = [
      {
        type: 'normal',
        options: ["A. é£›æ©Ÿ", "B. Uber", "C. è…³è¸è»Š", "D. ç«è»Š"],
        correct: ["B"],
        question: "åœ¨é¦¬ä¾†è¥¿äºï¼Œæˆ‘å€‘æœ€å¸¸æ­ä¹˜çš„äº¤é€šå·¥å…·æ˜¯ï¼Ÿ"
      },
      {
        type: 'normal',
        options: [
          "A. ã€Šä¸­è«–è§€ç‡ƒå¯ç‡ƒå“ç¬¬åï¼ˆåå…­åˆï¼‰ã€‹", "B. é¦¬ä¾†è¥¿äºçš„å‚³çµ±æœé£¾è¨­è¨ˆ",
          "C. äºæ´²ç¾é£Ÿæ–‡åŒ–å°è«–", "D. é¦¬ä¾†èªæ—¥å¸¸æœƒè©±å…¥é–€", "E. åœ‹éš›ä¸­æ–‡æ•™å¸«å¯¦å‹™",
          "F. æ±å—äºç¾ä»£è—è¡“å°è«–", "G. å®—æ•™èˆ‡å¤šå…ƒç¤¾æœƒ", "H. æµ·å¤–è¯äººç¶“æ¿Ÿå²",
          "I. æ–°é¦¬æ–‡å­¸èˆ‡ç¾ä»£æ€§", "J. ä¸–ç•Œè¯æ–‡åª’é«”æ¦‚è«–", "K. è¯äººå‚³çµ±ç¯€æ…¶",
          "L. å©šå§»èˆ‡å®—æ•™æ–‡åŒ–", "M. å—æ´‹æ­·å²è¸æŸ¥èˆ‡å¯«ä½œ", "N. é¦¬è¯æˆ²åŠ‡å‰µä½œå·¥ä½œåŠ",
          "O. æ±å—äºé›»å½±è³æ", "P. æµ·å¤–ä¸­æ–‡å ±åˆŠåˆ†æ", "Q. é¦¬ä¾†èªæ–‡æ³•çµæ§‹",
          "R. å®¢å®¶èªèˆ‡ç¤¾ç¾¤", "S. å¤šèªç¤¾æœƒçš„èªè¨€ä½¿ç”¨", "T. æ–°æ‘æ–‡åŒ–ç ”ç©¶",
          "U. è¯èªèª²å ‚å¯¦ç¿’ç¶“é©—", "V. é¦¬ä¾†è¥¿äºå°èªªé–±è®€", "W. å°å°¼èªåˆç´šæœƒè©±",
          "X. å—æ´‹è…³æœ¬ç ”ç©¶å°è«–", "Y. ã€Šé¦¬è¯æ–‡å­¸ã€é¦¬ä¾†æ–‡å­¸ä»¥åŠè¯é¦¬æ¯”è¼ƒçš„ç ”ç©¶æ¦‚æ³ã€‹",
          "Z. ç§‘æŠ€èˆ‡ç¤¾æœƒ"
        ],
        correct: ["A", "Y"],
        question: "æˆ‘å€‘ä¸Šéå“ªäº›èª²ï¼Ÿï¼ˆå¯è¤‡é¸ï¼‰"
      },
      {
        type: 'normal',
        options: [
          "A. æ¤°æ—å°å¾‘", "B. å¤å··å¼„", "C. å®œåº·çœè¶…å¸‚", "D. æª³æ¦”åœ’", "E. é›²éœ§å±±ä¸˜",
          "F. æ¹–ç•”å…¬åœ’", "G. å³¶å¶¼æ²™ç˜", "H. å¸‚ä¸­å¿ƒå»£å ´", "I. èŠ±åœ’æ­¥é“", "J. æºªæµå²¸é‚Š",
          "K. æ–‡åŒ–å±•è¦½é¤¨", "L. å‚³çµ±æ‰‹ä½œåŠ", "M. å¤é®è€è¡—", "N. è è˜¿ç”°", "O. éª°å­å··",
          "P. é›å ´è¡—", "Q. ç‡ˆç± å··", "R. éœ¹é‚æ´", "S. åˆå¤œå°é…’é¤¨", "T. ç«¹æ—æ­¥é“",
          "U. ç’°å³¶æ­¥é“", "V. å±±é ‚ç­æœ›å°", "W. éºè·¡è€ƒå¤å€", "X. å¤å ¡æ¢éšª", "Y. é‡‘å¯¶å¤å»Ÿ",
          "Z. ç†±å¸¶é›¨æ—"
        ],
        correct: ["C", "R", "Y"],
        question: "æˆ‘å€‘å»éå“ªäº›åœ°æ–¹å‘¢ï¼Ÿï¼ˆå¯è¤‡é¸ï¼‰"
      },
      {
        type: 'single',
        options: ["æ¨‚", "å–œ", "å“€", "æ€’"],
        correct: ["æ¨‚"],
        question: "é€™è¶Ÿé¦¬ä¾†è¥¿äºçš„å¿ƒæƒ…ï¼Œç”¨ä¸€å€‹å­—å½¢å®¹ï¼Ÿ"
      }
    ];

    const hintMessages = [
      "ä»”ç´°æƒ³æƒ³ï¼Œé‚£æ®µå›æ†¶æ˜¯æ€æ¨£çš„å‘¢ï¼Ÿ",
      "å¯èƒ½å†å›å‘³ä¸€ä¸‹æˆ‘å€‘çš„é¦¬ä¾†ä¹‹æ—…å–”ï½",
      "ç­”æ¡ˆå°±åœ¨ä½ å¿ƒä¸­æœ€æ·±åˆ»çš„é‚£å€‹ç‰‡æ®µï¼",
      "å›æƒ³ä¸€ä¸‹è‚‰éª¨èŒ¶ã€éœ¹é‚æ´ã€æ­Uberâ€¦â€¦",
      "ä¸€å®šå¯ä»¥çš„ï¼Œå†è©¦è©¦ï¼"
    ];

    let currentQuestion = 0;
    let selectedLetters = [];
    let finalResult = [];

    
      function updateProgress() {
        const progress = ((currentQuestion) / questions.length) * 100;
        document.getElementById("progressFill").style.width = progress + "%";
      }

    function generateButtons(hintText = null) {
      const alphabetContainer = document.getElementById('alphabet');
      alphabetContainer.innerHTML = '';
      const current = questions[currentQuestion];

      current.options.forEach(opt => {
        const btn = document.createElement('div');
        btn.className = 'multi-choice';
        btn.innerText = opt;
        btn.onclick = () => selectLetter(btn, opt);
        alphabetContainer.appendChild(btn);
      });

      document.getElementById('story').innerHTML = hintText
        ? `<span style="color: #fa541c;">${hintText}</span><br><br>ç¬¬ <span id="questionNumber">${currentQuestion + 1}</span> é¡Œï¼š${current.question}`
        : `ç¬¬ <span id="questionNumber">${currentQuestion + 1}</span> é¡Œï¼š${current.question}<br><small style="color: gray;">ï¼ˆè«‹é»å³ä¸Šè§’ğŸ”ˆæ’­æ”¾éŸ³æ¨‚ï¼‰</small>`;
    }

    function selectLetter(button, optionText) {
      const letter = optionText.split('.')[0].trim().toUpperCase();
      const isSingle = questions[currentQuestion].type === 'single';

      if (isSingle) {
        selectedLetters = [letter];
        document.querySelectorAll('.multi-choice').forEach(btn => btn.classList.remove('selected'));
        button.classList.add('selected');
      } else {
        if (button.classList.contains('selected')) {
          button.classList.remove('selected');
          selectedLetters = selectedLetters.filter(l => l !== letter);
        } else {
          button.classList.add('selected');
          selectedLetters.push(letter);
        }
      }
    }

    function submitMulti() {
      const current = questions[currentQuestion];
      const correct = current.correct.map(c => c.toUpperCase());
      const sel = selectedLetters.map(l => l.toUpperCase());
      const isCorrect = correct.every(c => sel.includes(c)) && sel.length === correct.length;

      if (currentQuestion === 3 && current.type === 'single') {
        const response = sel[0];
        if (response === 'å–œ') {
          generateButtons("é‚„æœ‰å‘¢ï¼Ÿ");
          return;
        } else if (response === 'æ€’') {
          generateButtons("æˆ‘æ„Ÿåˆ°å¾ˆæŠ±æ­‰ï¼");
          return;
        } else if (response === 'å“€') {
          generateButtons("æ€éº¼æœƒï¼Ÿç™¼ç”Ÿç”šéº¼äº‹äº†ï¼Ÿ");
          return;
        }
      }

      if (isCorrect) {
        if (currentQuestion === 0) finalResult.push("B");
        else if (currentQuestion === 1) finalResult.push("YA");
        else if (currentQuestion === 2) finalResult.push("CRY");
        else if (currentQuestion === 3) finalResult.push("æ¨‚");

        currentQuestion++;
        selectedLetters = [];

        if (currentQuestion < questions.length) {
          let currentBgIndex = 1;
const totalBgs = 8;

function rotateBackground() {
  document.getElementById('bgImage').src = `images/bg${currentBgIndex}.jpg`;
  currentBgIndex = (currentBgIndex % totalBgs) + 1;
}

rotateBackground();
setInterval(rotateBackground, 5000);

generateButtons();
      updateProgress();
        } else {
          document.getElementById('story').innerHTML = `
            ğŸ‰ æ­å–œå®Œæˆå›æ†¶æŒ‘æˆ°ï¼<br><br>
            ä½ æœ€å¾Œé¸æ“‡ï¼š<strong>${finalResult.join('ã€')}</strong><br><br>
            ä¹Ÿå°±æ˜¯ï¼š<strong style="font-size:2em;">ç•¢æ¥­å¿«æ¨‚</strong> ğŸ“<br><br>
            <button onclick="showLetter()">ğŸ’Œ é»æˆ‘å±•é–‹ä¿¡ä»¶</button>
            <br><br>
            <button onclick="restart()">é‡æ–°æŒ‘æˆ°</button>
          `;
          document.getElementById('alphabet').innerHTML = '';
          updateProgress();
          document.querySelectorAll("button").forEach(btn => {
            if (btn.innerText.includes("æäº¤") || btn.innerText.includes("é‡æ–°é¸æ“‡")) {
              btn.style.display = "none";
            }
          });
        }
      } else {
        const randomHint = hintMessages[Math.floor(Math.random() * hintMessages.length)];
        generateButtons(randomHint);
        selectedLetters = [];
      }
    }

    function resetMulti() {
      selectedLetters = [];
      let currentBgIndex = 1;
const totalBgs = 8;

function rotateBackground() {
  document.getElementById('bgImage').src = `images/bg${currentBgIndex}.jpg`;
  currentBgIndex = (currentBgIndex % totalBgs) + 1;
}

rotateBackground();
setInterval(rotateBackground, 5000);

generateButtons();
      updateProgress();
    }

    function restart() {
      currentQuestion = 0;
      selectedLetters = [];
      finalResult = [];
      document.querySelectorAll("button").forEach(btn => btn.style.display = "inline-block");
      document.getElementById("letterContainer").style.display = "none";
      document.getElementById("overlay").style.display = "none";
      let currentBgIndex = 1;
const totalBgs = 8;

function rotateBackground() {
  document.getElementById('bgImage').src = `images/bg${currentBgIndex}.jpg`;
  currentBgIndex = (currentBgIndex % totalBgs) + 1;
}

rotateBackground();
setInterval(rotateBackground, 5000);

generateButtons();
      updateProgress();
    }

    function toggleMusic() {
      const bgm = document.getElementById('bgm');
      if (bgm.paused) {
        bgm.play().then(() => {
          document.getElementById('musicControl').innerText = 'ğŸ”Š éŸ³æ¨‚';
        }).catch(e => {
          alert("éŸ³æ¨‚æ’­æ”¾å¤±æ•—ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚");
        });
      } else {
        bgm.pause();
        document.getElementById('musicControl').innerText = 'ğŸ”ˆ éŸ³æ¨‚';
      }
    }

    function showLetter() {
      document.getElementById("overlay").style.display = "flex";
    }

    function closeLetter() {
      document.getElementById("overlay").style.display = "none";
    }

    document.addEventListener('keydown', (e) => {
      const key = e.key.toUpperCase();
      if (key >= 'A' && key <= 'Z') {
        const buttons = document.querySelectorAll('.multi-choice');
        buttons.forEach(btn => {
          const letter = btn.innerText.split('.')[0].trim().toUpperCase();
          if (letter === key) {
            btn.click();
          }
        });
      }
      if (e.key === 'Enter') {
        submitMulti();
      }
    });

    let currentBgIndex = 1;
const totalBgs = 8;

function rotateBackground() {
  document.getElementById('bgImage').src = `images/bg${currentBgIndex}.jpg`;
  currentBgIndex = (currentBgIndex % totalBgs) + 1;
}

rotateBackground();
setInterval(rotateBackground, 5000);

generateButtons();
      updateProgress();
  
</script>
</body>
</html>
